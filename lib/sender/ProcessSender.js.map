{"version":3,"sources":["../../src/sender/ProcessSender.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;;;IAEqB,a;;;AACnB,2BAA0B;AAAA,QAAd,OAAc,yDAAJ,EAAI;AAAA;;AAAA;;AAExB,QAAI,CAAC,QAAQ,IAAb,EAAmB;AACjB,6BAAQ,6FAAR;AACA,cAAQ,IAAR,GAAe,YAAM,CACpB,CADD;AAED;AACD,UAAK,UAAL,CAAgB,QAAQ,IAAxB,EAA8B,QAAQ,IAAtC;AAPwB;AAQzB;;;;+BAEU,I,EAAM,I,EAAM;AACrB,UAAI,CAAC,IAAD,IAAS,CAAC,IAAd,EAAoB;AAClB,eAAO,kBAAQ,OAAR,EAAP;AACD;AACD,aAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAI;AACF,kBAAQ,IAAR,CAAa,EAAE,QAAQ,EAAE,UAAF,EAAQ,UAAR,EAAV,EAAb;AACA,iBAAO,QAAQ,EAAE,UAAF,EAAQ,UAAR,EAAR,CAAP;AACD,SAHD,CAGE,OAAO,KAAP,EAAc;AACd,iBAAO,OAAO,KAAP,CAAP;AACD;AACF,OAPM,CAAP;AAQD;;;yBAEI,O,EAAS;AACZ,aAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAI;AACF,kBAAQ,IAAR,CAAa,EAAE,gBAAF,EAAb;AACA,iBAAO,QAAQ,OAAR,CAAP;AACD,SAHD,CAGE,OAAO,KAAP,EAAc;AACd,iBAAO,OAAO,KAAP,CAAP;AACD;AACF,OAPM,CAAP;AAQD;;;;;kBAlCkB,a","file":"ProcessSender.js","sourcesContent":["import Sender from './Sender';\nimport warning from '../warning';\n\nexport default class ProcessSender extends Sender {\n  constructor(options = {}) {\n    super();\n    if (!process.send) {\n      warning('Process Sender only can work in clusters mode. This Process Sender will not send metricses.');\n      process.send = () => {\n      };\n    }\n    this.sendClient(options.host, options.port);\n  }\n\n  sendClient(host, port) {\n    if (!host || !port) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve, reject) => {\n      try {\n        process.send({ client: { host, port } });\n        return resolve({ host, port });\n      } catch (error) {\n        return reject(error);\n      }\n    });\n  }\n\n  send(metrics) {\n    return new Promise((resolve, reject) => {\n      try {\n        process.send({ metrics });\n        return resolve(metrics);\n      } catch (error) {\n        return reject(error);\n      }\n    });\n  }\n}\n"]}