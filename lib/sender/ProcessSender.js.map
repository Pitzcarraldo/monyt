{"version":3,"sources":["../../src/sender/ProcessSender.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAGqB;;;AACnB,WADmB,aACnB,GAA0B;QAAd,gEAAU,kBAAI;wCADP,eACO;;6FADP,2BACO;;AAExB,QAAI,CAAC,QAAQ,IAAR,EAAc;AACjB,6BAAQ,6FAAR,EADiB;AAEjB,cAAQ,IAAR,GAAe,YAAM,EAAN,CAFE;KAAnB;AAKA,UAAK,UAAL,CAAgB,QAAQ,IAAR,EAAc,QAAQ,IAAR,CAA9B,CAPwB;;GAA1B;;6BADmB;;+BAWR,MAAM,MAAM;AACrB,UAAI,CAAC,IAAD,IAAS,CAAC,IAAD,EAAO;AAClB,eAAO,kBAAQ,OAAR,EAAP,CADkB;OAApB;AAGA,aAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAI;AACF,kBAAQ,IAAR,CAAa,EAAE,QAAQ,EAAE,UAAF,EAAQ,UAAR,EAAR,EAAf,EADE;AAEF,iBAAO,QAAQ,EAAE,UAAF,EAAQ,UAAR,EAAR,CAAP,CAFE;SAAJ,CAGE,OAAO,KAAP,EAAc;AACd,iBAAO,OAAO,KAAP,CAAP,CADc;SAAd;OAJe,CAAnB,CAJqB;;;;yBAclB,SAAS;AACZ,aAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,YAAI;AACF,kBAAQ,IAAR,CAAa,EAAE,gBAAF,EAAb,EADE;AAEF,iBAAO,QAAQ,OAAR,CAAP,CAFE;SAAJ,CAGE,OAAO,KAAP,EAAc;AACd,iBAAO,OAAO,KAAP,CAAP,CADc;SAAd;OAJe,CAAnB,CADY;;;SAzBK","file":"ProcessSender.js","sourcesContent":["import Sender from './Sender';\nimport warning from '../warning';\n\nexport default class ProcessSender extends Sender {\n  constructor(options = {}) {\n    super();\n    if (!process.send) {\n      warning('Process Sender only can work in clusters mode. This Process Sender will not send metricses.');\n      process.send = () => {\n      };\n    }\n    this.sendClient(options.host, options.port);\n  }\n\n  sendClient(host, port) {\n    if (!host || !port) {\n      return Promise.resolve();\n    }\n    return new Promise((resolve, reject) => {\n      try {\n        process.send({ client: { host, port } });\n        return resolve({ host, port });\n      } catch (error) {\n        return reject(error);\n      }\n    });\n  }\n\n  send(metrics) {\n    return new Promise((resolve, reject) => {\n      try {\n        process.send({ metrics });\n        return resolve(metrics);\n      } catch (error) {\n        return reject(error);\n      }\n    });\n  }\n}\n"]}